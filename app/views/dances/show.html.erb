<h1><%= @dance.name %></h1>

<h4><%= @dance.county %></h4>
<h4><%= @dance.style %></h4>
<h4><%= @dance.note %></h4>

<% if @dance.figures.any? %>
  <h4>Here are the figures for this dance:</h4>

  <ul>
    <% @dance.figures.each do |figure| %>
      <li>
        Figure <%= figure.number %> |
        <%= figure.title %> |
        <%= figure.tune %> |
        <%= figure.bar_total %> Bars |

        <%= link_to "Add Instructions", new_figure_instruction_path(figure) %> |
        <%= link_to "Edit Figure", edit_dance_figure_path(@dance, figure) %> |
        <%= link_to "Delete Figure", dance_figure_path(@dance, figure),
                                 :data => {:confirm => "Are you sure?",
                                                :method => "delete"} %>
      </li>
      <ul>
        <% figure.instructions.each do |instruction| %>
          <li>
            <%= instruction.number %> |
            <%= instruction.move %> |
            <%= instruction.call %> |
            <%= instruction.instruction %> |
            <%= instruction.bars %> |

            <%= link_to "Edit Instructions", edit_figure_instruction_path(@figure, instruction) %> |
            <%= link_to "Delete Instructions", figure_instruction_path(@figure, instruction),
                                     :data => {:confirm => "Are you sure?",
                                                    :method => "delete"} %>
          </li>
        <% end %>

    <% end %>
  </ul>
<% else %>
  <p>There are no figures yet!</p>
<% end %>

<p><%= link_to "Add Figures", new_dance_figure_path(@dance) %></p>
<p><%= link_to "Edit Dance", edit_dance_path(@dance) %></p>
<p><%= link_to "Delete Dance", dance_path(@dance),
                         :data => {:confirm => "You sure?",
                                   :method => "delete"} %></p>
<p><%= link_to "Return to dances", dances_path %></p>
